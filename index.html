<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ATC Callsign Generator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 2rem auto; padding: 1rem; }
    input, button { padding: 0.5rem; font-size: 1rem; margin-top: 1rem; }
    .command { margin-top: 1rem; padding: 0.5rem; border: 1px solid #ddd; border-radius: 6px; }
    .play-button { margin-left: 1rem; }
  </style>
</head>
<body>
  <h1>ATC Callsign Radio Generator</h1>
  <p>Enter callsign (e.g. OH-ABC):</p>
  <input type="text" id="callsign" placeholder="Enter callsign">
  <button onclick="generateCommands()">Generate Commands</button>
  <div id="commandList"></div>

  <script>
    const phrases = [
      "[CALLSIGN], cleared for takeoff runway 22",
      "[CALLSIGN], contact tower on 118.7",
      "[CALLSIGN], line up and wait runway 04",
      "[CALLSIGN], taxi to holding point via Alpha and Bravo"
    ];

    async function generateCommands() {
      const callsign = document.getElementById("callsign").value.trim().toUpperCase();
      const commandList = document.getElementById("commandList");
      commandList.innerHTML = "";

      for (const template of phrases) {
        const text = template.replace("[CALLSIGN]", callsign);

        const audioUrl = await generateAudio(text);

        const container = document.createElement("div");
        container.className = "command";
        container.textContent = text;

        const playBtn = document.createElement("button");
        playBtn.textContent = "▶️ Play";
        playBtn.className = "play-button";
        playBtn.onclick = () => {
          const audio = new Audio(audioUrl);
          audio.play();
        };

        container.appendChild(playBtn);
        commandList.appendChild(container);
      }
    }

    async function generateAudio(text) {
      // Replace with your actual OpenAI API key
      const apiKey = "YOUR_OPENAI_API_KEY";
      const response = await fetch("https://api.openai.com/v1/audio/speech", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${apiKey}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: "tts-1",
          voice: "alloy",
          input: text
        })
      });

      const blob = await response.blob();
      return URL.createObjectURL(blob);
    }
  </script>
</body>
</html>
